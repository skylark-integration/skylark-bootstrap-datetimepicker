{"version":3,"sources":["datetimepicker.js"],"names":["define","skylark","$","moment","DateTimePicker","element","options","date","viewDate","input","use24Hours","actualFormat","parseFormats","currentViewMode","eData","dataOptions","picker","unset","component","widget","minViewModeNumber","datePickerModes","clsName","navFnc","navStep","viewModes","verticalModes","horizontalModes","toolbarPlacements","keyMap","up","38","down","40","left","37","right","39","tab","9","escape","27","enter","13","pageUp","33","pageDown","34","shift","16","control","17","space","32","t","84","delete","46","keyState","hasTimeZone","undefined","tz","timeZone","getMoment","d","returnMoment","isDate","isMoment","useStrict","isEnabled","granularity","length","TypeError","indexOf","toLowerCase","hasTime","hasDate","getTimePickerTemplate","topRow","middleRow","bottomRow","hoursView","addClass","append","minutesView","secondsView","ret","attr","href","tabindex","title","tooltips","incrementHour","icons","data-time-component","pickHour","decrementHour","html","incrementMinute","pickMinute","decrementMinute","incrementSecond","pickSecond","decrementSecond","data-action","togglePeriod","push","getTemplate","row","headTemplate","contTemplate","template","dateView","previous","calendarWeeks","next","clone","timeView","content","toolbar","collapse","showTodayButton","today","sideBySide","selectTime","time","showClear","clear","showClose","close","inline","removeClass","toolbarPlacement","place","parent","position","offset","vertical","widgetPositioning","horizontal","widgetParent","is","after","children","first","top","height","window","scrollTop","outerHeight","width","outerWidth","css","parents","filter","this","Error","bottom","notifyEvent","e","type","isSame","oldDate","trigger","viewUpdate","change","showMode","dir","Math","max","min","find","hide","show","isValid","targetMoment","disabledDates","testDate","format","enabledDates","isInEnabledDates","minDate","isBefore","maxDate","isAfter","daysOfWeekDisabled","day","disabledHours","isInDisabledHours","enabledHours","isInEnabledHours","disabledTimeIntervals","found","each","isBetween","fillDate","currentDate","i","daysView","daysViewHeader","clsNames","eq","prevMonth","selectMonth","nextMonth","text","dayViewHeaderFormat","subtract","add","startOf","weekday","week","classNames","join","monthsView","monthsViewHeader","months","empty","prevYear","selectYear","nextYear","year","month","index","yearsView","yearsViewHeader","startYear","endYear","prevDecade","selectDecade","nextDecade","updateYears","endDecadeYear","decadesView","decadesViewHeader","startDecade","y","endDecade","startedAt","minDateDecade","maxDateDecade","prevCentury","nextCentury","updateDecades","fillTime","toggle","newDate","timeComponents","hours","table","currentHour","hour","fillHours","currentMinute","step","stepping","minute","fillMinutes","currentSecond","second","fillSeconds","update","setValue","val","data","locale","minutes","round","seconds","keepInvalid","transitioning","collapseData","hasClass","toggleClass","off","remove","blur","parseInputDate","inputDate","Date","actions","pickerSwitch","target","closest","parseInt","selectDay","keepOpen","incrementHours","incrementMinutes","incrementSeconds","decrementHours","decrementMinutes","decrementSeconds","togglePicker","$this","$parent","expanded","closed","showPicker","showHours","showMinutes","showSeconds","selectHour","call","selectMinute","selectSecond","todaysDate","doAction","currentTarget","apply","arguments","currentMoment","prop","ignoreReadonly","trim","useCurrent","m","endOf","fillDow","spans","monthsShort","fillMonths","on","focusOnShow","focus","keydown","index2","keyBindKeys","allModifiersPressed","handler","pressedKeys","pressedModifiers","currentKey","which","hasOwnProperty","keyBinds","split","stopPropagation","preventDefault","keyup","parsedDate","stopImmediatePropagation","indexGivenDates","givenDatesArray","givenDatesIndexed","dDate","Object","keys","indexGivenHours","givenHoursArray","givenHoursIndexed","initFormatting","replace","formatInput","localeData","longDateFormat","formatInput2","extraFormats","slice","destroy","allowInputToggle","removeData","disable","enable","newOptions","extend","key","value","newFormat","newZone","formats","Array","dates","splice","reduce","previousValue","currentValue","isNaN","sort","tries","defaultDate","useCurrentOptions","viewMode","toString","debug","datepickerInput","dateOptions","attributeName","charAt","toUpperCase","fn","datetimepicker","returnValue","args","prototype","isInstance","_options","defaults","instance","inArray","control up","control down","control space","click","attach"],"mappings":"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","file":"../datetimepicker.js","sourcesContent":["define([\n    \"skylark-langx/skylark\",\n    \"skylark-jquery\",\n    \"skylark-moment\"\n],function (skylark,$, moment) {\n\n    var DateTimePicker = function (element, options) {\n        var picker = {},\n            date,\n            viewDate,\n            unset = true,\n            input,\n            component = false,\n            widget = false,\n            use24Hours,\n            minViewModeNumber = 0,\n            actualFormat,\n            parseFormats,\n            currentViewMode,\n            datePickerModes = [\n                {\n                    clsName: 'days',\n                    navFnc: 'M',\n                    navStep: 1\n                },\n                {\n                    clsName: 'months',\n                    navFnc: 'y',\n                    navStep: 1\n                },\n                {\n                    clsName: 'years',\n                    navFnc: 'y',\n                    navStep: 10\n                },\n                {\n                    clsName: 'decades',\n                    navFnc: 'y',\n                    navStep: 100\n                }\n            ],\n            viewModes = ['days', 'months', 'years', 'decades'],\n            verticalModes = ['top', 'bottom', 'auto'],\n            horizontalModes = ['left', 'right', 'auto'],\n            toolbarPlacements = ['default', 'top', 'bottom'],\n            keyMap = {\n                'up': 38,\n                38: 'up',\n                'down': 40,\n                40: 'down',\n                'left': 37,\n                37: 'left',\n                'right': 39,\n                39: 'right',\n                'tab': 9,\n                9: 'tab',\n                'escape': 27,\n                27: 'escape',\n                'enter': 13,\n                13: 'enter',\n                'pageUp': 33,\n                33: 'pageUp',\n                'pageDown': 34,\n                34: 'pageDown',\n                'shift': 16,\n                16: 'shift',\n                'control': 17,\n                17: 'control',\n                'space': 32,\n                32: 'space',\n                't': 84,\n                84: 't',\n                'delete': 46,\n                46: 'delete'\n            },\n            keyState = {},\n\n            /********************************************************************************\n             *\n             * Private functions\n             *\n             ********************************************************************************/\n\n            hasTimeZone = function () {\n                return moment.tz !== undefined && options.timeZone !== undefined && options.timeZone !== null && options.timeZone !== '';\n            },\n\n            getMoment = function (d) {\n                var returnMoment;\n\n                if (d === undefined || d === null) {\n                    returnMoment = moment(); //TODO should this use format? and locale?\n                } else if (moment.isDate(d) || moment.isMoment(d)) {\n                    // If the date that is passed in is already a Date() or moment() object,\n                    // pass it directly to moment.\n                    returnMoment = moment(d);\n                } else if (hasTimeZone()) { // There is a string to parse and a default time zone\n                    // parse with the tz function which takes a default time zone if it is not in the format string\n                    returnMoment = moment.tz(d, parseFormats, options.useStrict, options.timeZone);\n                } else {\n                    returnMoment = moment(d, parseFormats, options.useStrict);\n                }\n\n                if (hasTimeZone()) {\n                    returnMoment.tz(options.timeZone);\n                }\n\n                return returnMoment;\n            },\n\n            isEnabled = function (granularity) {\n                if (typeof granularity !== 'string' || granularity.length > 1) {\n                    throw new TypeError('isEnabled expects a single character string parameter');\n                }\n                switch (granularity) {\n                    case 'y':\n                        return actualFormat.indexOf('Y') !== -1;\n                    case 'M':\n                        return actualFormat.indexOf('M') !== -1;\n                    case 'd':\n                        return actualFormat.toLowerCase().indexOf('d') !== -1;\n                    case 'h':\n                    case 'H':\n                        return actualFormat.toLowerCase().indexOf('h') !== -1;\n                    case 'm':\n                        return actualFormat.indexOf('m') !== -1;\n                    case 's':\n                        return actualFormat.indexOf('s') !== -1;\n                    default:\n                        return false;\n                }\n            },\n\n            hasTime = function () {\n                return (isEnabled('h') || isEnabled('m') || isEnabled('s'));\n            },\n\n            hasDate = function () {\n                return (isEnabled('y') || isEnabled('M') || isEnabled('d'));\n            },\n\n            getDatePickerTemplate = function () {\n                var headTemplate = $('<thead>')\n                        .append($('<tr>')\n                            .append($('<th>').addClass('prev').attr('data-action', 'previous')\n                                .append($('<span>').addClass(options.icons.previous))\n                                )\n                            .append($('<th>').addClass('picker-switch').attr('data-action', 'pickerSwitch').attr('colspan', (options.calendarWeeks ? '6' : '5')))\n                            .append($('<th>').addClass('next').attr('data-action', 'next')\n                                .append($('<span>').addClass(options.icons.next))\n                                )\n                            ),\n                    contTemplate = $('<tbody>')\n                        .append($('<tr>')\n                            .append($('<td>').attr('colspan', (options.calendarWeeks ? '8' : '7')))\n                            );\n\n                return [\n                    $('<div>').addClass('datepicker-days')\n                        .append($('<table>').addClass('table-condensed')\n                            .append(headTemplate)\n                            .append($('<tbody>'))\n                            ),\n                    $('<div>').addClass('datepicker-months')\n                        .append($('<table>').addClass('table-condensed')\n                            .append(headTemplate.clone())\n                            .append(contTemplate.clone())\n                            ),\n                    $('<div>').addClass('datepicker-years')\n                        .append($('<table>').addClass('table-condensed')\n                            .append(headTemplate.clone())\n                            .append(contTemplate.clone())\n                            ),\n                    $('<div>').addClass('datepicker-decades')\n                        .append($('<table>').addClass('table-condensed')\n                            .append(headTemplate.clone())\n                            .append(contTemplate.clone())\n                            )\n                ];\n            },\n\n            getTimePickerMainTemplate = function () {\n                var topRow = $('<tr>'),\n                    middleRow = $('<tr>'),\n                    bottomRow = $('<tr>');\n\n                if (isEnabled('h')) {\n                    topRow.append($('<td>')\n                        .append($('<a>').attr({ href: '#', tabindex: '-1', 'title': options.tooltips.incrementHour }).addClass('btn').attr('data-action', 'incrementHours').append($('<span>').addClass(options.icons.up))));\n                    middleRow.append($('<td>')\n                        .append($('<span>').addClass('timepicker-hour').attr({ 'data-time-component': 'hours', 'title': options.tooltips.pickHour }).attr('data-action', 'showHours')));\n                    bottomRow.append($('<td>')\n                        .append($('<a>').attr({ href: '#', tabindex: '-1', 'title': options.tooltips.decrementHour }).addClass('btn').attr('data-action', 'decrementHours').append($('<span>').addClass(options.icons.down))));\n                }\n                if (isEnabled('m')) {\n                    if (isEnabled('h')) {\n                        topRow.append($('<td>').addClass('separator'));\n                        middleRow.append($('<td>').addClass('separator').html(':'));\n                        bottomRow.append($('<td>').addClass('separator'));\n                    }\n                    topRow.append($('<td>')\n                        .append($('<a>').attr({ href: '#', tabindex: '-1', 'title': options.tooltips.incrementMinute }).addClass('btn').attr('data-action', 'incrementMinutes')\n                            .append($('<span>').addClass(options.icons.up))));\n                    middleRow.append($('<td>')\n                        .append($('<span>').addClass('timepicker-minute').attr({ 'data-time-component': 'minutes', 'title': options.tooltips.pickMinute }).attr('data-action', 'showMinutes')));\n                    bottomRow.append($('<td>')\n                        .append($('<a>').attr({ href: '#', tabindex: '-1', 'title': options.tooltips.decrementMinute }).addClass('btn').attr('data-action', 'decrementMinutes')\n                            .append($('<span>').addClass(options.icons.down))));\n                }\n                if (isEnabled('s')) {\n                    if (isEnabled('m')) {\n                        topRow.append($('<td>').addClass('separator'));\n                        middleRow.append($('<td>').addClass('separator').html(':'));\n                        bottomRow.append($('<td>').addClass('separator'));\n                    }\n                    topRow.append($('<td>')\n                        .append($('<a>').attr({ href: '#', tabindex: '-1', 'title': options.tooltips.incrementSecond }).addClass('btn').attr('data-action', 'incrementSeconds')\n                            .append($('<span>').addClass(options.icons.up))));\n                    middleRow.append($('<td>')\n                        .append($('<span>').addClass('timepicker-second').attr({ 'data-time-component': 'seconds', 'title': options.tooltips.pickSecond }).attr('data-action', 'showSeconds')));\n                    bottomRow.append($('<td>')\n                        .append($('<a>').attr({ href: '#', tabindex: '-1', 'title': options.tooltips.decrementSecond }).addClass('btn').attr('data-action', 'decrementSeconds')\n                            .append($('<span>').addClass(options.icons.down))));\n                }\n\n                if (!use24Hours) {\n                    topRow.append($('<td>').addClass('separator'));\n                    middleRow.append($('<td>')\n                        .append($('<button>').addClass('btn btn-primary').attr({ 'data-action': 'togglePeriod', tabindex: '-1', 'title': options.tooltips.togglePeriod })));\n                    bottomRow.append($('<td>').addClass('separator'));\n                }\n\n                return $('<div>').addClass('timepicker-picker')\n                    .append($('<table>').addClass('table-condensed')\n                        .append([topRow, middleRow, bottomRow]));\n            },\n\n            getTimePickerTemplate = function () {\n                var hoursView = $('<div>').addClass('timepicker-hours')\n                        .append($('<table>').addClass('table-condensed')),\n                    minutesView = $('<div>').addClass('timepicker-minutes')\n                        .append($('<table>').addClass('table-condensed')),\n                    secondsView = $('<div>').addClass('timepicker-seconds')\n                        .append($('<table>').addClass('table-condensed')),\n                    ret = [getTimePickerMainTemplate()];\n\n                if (isEnabled('h')) {\n                    ret.push(hoursView);\n                }\n                if (isEnabled('m')) {\n                    ret.push(minutesView);\n                }\n                if (isEnabled('s')) {\n                    ret.push(secondsView);\n                }\n\n                return ret;\n            },\n\n            getToolbar = function () {\n                var row = [];\n                if (options.showTodayButton) {\n                    row.push($('<td>').append($('<a>').attr({ 'data-action': 'today', 'title': options.tooltips.today }).append($('<span>').addClass(options.icons.today))));\n                }\n                if (!options.sideBySide && hasDate() && hasTime()) {\n                    row.push($('<td>').append($('<a>').attr({ 'data-action': 'togglePicker', 'title': options.tooltips.selectTime }).append($('<span>').addClass(options.icons.time))));\n                }\n                if (options.showClear) {\n                    row.push($('<td>').append($('<a>').attr({ 'data-action': 'clear', 'title': options.tooltips.clear }).append($('<span>').addClass(options.icons.clear))));\n                }\n                if (options.showClose) {\n                    row.push($('<td>').append($('<a>').attr({ 'data-action': 'close', 'title': options.tooltips.close }).append($('<span>').addClass(options.icons.close))));\n                }\n                return $('<table>').addClass('table-condensed').append($('<tbody>').append($('<tr>').append(row)));\n            },\n\n            getTemplate = function () {\n                var template = $('<div>').addClass('bootstrap-datetimepicker-widget dropdown-menu'),\n                    dateView = $('<div>').addClass('datepicker').append(getDatePickerTemplate()),\n                    timeView = $('<div>').addClass('timepicker').append(getTimePickerTemplate()),\n                    content = $('<ul>').addClass('list-unstyled'),\n                    toolbar = $('<li>').addClass('picker-switch' + (options.collapse ? ' accordion-toggle' : '')).append(getToolbar());\n\n                if (options.inline) {\n                    template.removeClass('dropdown-menu');\n                }\n\n                if (use24Hours) {\n                    template.addClass('usetwentyfour');\n                }\n\n                if (isEnabled('s') && !use24Hours) {\n                    template.addClass('wider');\n                }\n\n                if (options.sideBySide && hasDate() && hasTime()) {\n                    template.addClass('timepicker-sbs');\n                    if (options.toolbarPlacement === 'top') {\n                        template.append(toolbar);\n                    }\n                    template.append(\n                        $('<div>').addClass('row')\n                            .append(dateView.addClass('col-md-6'))\n                            .append(timeView.addClass('col-md-6'))\n                    );\n                    if (options.toolbarPlacement === 'bottom') {\n                        template.append(toolbar);\n                    }\n                    return template;\n                }\n\n                if (options.toolbarPlacement === 'top') {\n                    content.append(toolbar);\n                }\n                if (hasDate()) {\n                    content.append($('<li>').addClass((options.collapse && hasTime() ? 'collapse in' : '')).append(dateView));\n                }\n                if (options.toolbarPlacement === 'default') {\n                    content.append(toolbar);\n                }\n                if (hasTime()) {\n                    content.append($('<li>').addClass((options.collapse && hasDate() ? 'collapse' : '')).append(timeView));\n                }\n                if (options.toolbarPlacement === 'bottom') {\n                    content.append(toolbar);\n                }\n                return template.append(content);\n            },\n\n            dataToOptions = function () {\n                var eData,\n                    dataOptions = {};\n\n                if (element.is('input') || options.inline) {\n                    eData = element.data();\n                } else {\n                    eData = element.find('input').data();\n                }\n\n                if (eData.dateOptions && eData.dateOptions instanceof Object) {\n                    dataOptions = $.extend(true, dataOptions, eData.dateOptions);\n                }\n\n                $.each(options, function (key) {\n                    var attributeName = 'date' + key.charAt(0).toUpperCase() + key.slice(1);\n                    if (eData[attributeName] !== undefined) {\n                        dataOptions[key] = eData[attributeName];\n                    }\n                });\n                return dataOptions;\n            },\n\n            place = function () {\n                var position = (component || element).position(),\n                    offset = (component || element).offset(),\n                    vertical = options.widgetPositioning.vertical,\n                    horizontal = options.widgetPositioning.horizontal,\n                    parent;\n\n                if (options.widgetParent) {\n                    parent = options.widgetParent.append(widget);\n                } else if (element.is('input')) {\n                    parent = element.after(widget).parent();\n                } else if (options.inline) {\n                    parent = element.append(widget);\n                    return;\n                } else {\n                    parent = element;\n                    element.children().first().after(widget);\n                }\n\n                // Top and bottom logic\n                if (vertical === 'auto') {\n                    if (offset.top + widget.height() * 1.5 >= $(window).height() + $(window).scrollTop() &&\n                        widget.height() + element.outerHeight() < offset.top) {\n                        vertical = 'top';\n                    } else {\n                        vertical = 'bottom';\n                    }\n                }\n\n                // Left and right logic\n                if (horizontal === 'auto') {\n                    if (parent.width() < offset.left + widget.outerWidth() / 2 &&\n                        offset.left + widget.outerWidth() > $(window).width()) {\n                        horizontal = 'right';\n                    } else {\n                        horizontal = 'left';\n                    }\n                }\n\n                if (vertical === 'top') {\n                    widget.addClass('top').removeClass('bottom');\n                } else {\n                    widget.addClass('bottom').removeClass('top');\n                }\n\n                if (horizontal === 'right') {\n                    widget.addClass('pull-right');\n                } else {\n                    widget.removeClass('pull-right');\n                }\n\n                // find the first parent element that has a non-static css positioning\n                if (parent.css('position') === 'static') {\n                    parent = parent.parents().filter(function () {\n                        return $(this).css('position') !== 'static';\n                    }).first();\n                }\n\n                if (parent.length === 0) {\n                    throw new Error('datetimepicker component should be placed within a non-static positioned container');\n                }\n\n                widget.css({\n                    top: vertical === 'top' ? 'auto' : position.top + element.outerHeight(),\n                    bottom: vertical === 'top' ? parent.outerHeight() - (parent === element ? 0 : position.top) : 'auto',\n                    left: horizontal === 'left' ? (parent === element ? 0 : position.left) : 'auto',\n                    right: horizontal === 'left' ? 'auto' : parent.outerWidth() - element.outerWidth() - (parent === element ? 0 : position.left)\n                });\n            },\n\n            notifyEvent = function (e) {\n                if (e.type === 'dp.change' && ((e.date && e.date.isSame(e.oldDate)) || (!e.date && !e.oldDate))) {\n                    return;\n                }\n                element.trigger(e);\n            },\n\n            viewUpdate = function (e) {\n                if (e === 'y') {\n                    e = 'YYYY';\n                }\n                notifyEvent({\n                    type: 'dp.update',\n                    change: e,\n                    viewDate: viewDate.clone()\n                });\n            },\n\n            showMode = function (dir) {\n                if (!widget) {\n                    return;\n                }\n                if (dir) {\n                    currentViewMode = Math.max(minViewModeNumber, Math.min(3, currentViewMode + dir));\n                }\n                widget.find('.datepicker > div').hide().filter('.datepicker-' + datePickerModes[currentViewMode].clsName).show();\n            },\n\n            fillDow = function () {\n                var row = $('<tr>'),\n                    currentDate = viewDate.clone().startOf('w').startOf('d');\n\n                if (options.calendarWeeks === true) {\n                    row.append($('<th>').addClass('cw').text('#'));\n                }\n\n                while (currentDate.isBefore(viewDate.clone().endOf('w'))) {\n                    row.append($('<th>').addClass('dow').text(currentDate.format('dd')));\n                    currentDate.add(1, 'd');\n                }\n                widget.find('.datepicker-days thead').append(row);\n            },\n\n            isInDisabledDates = function (testDate) {\n                return options.disabledDates[testDate.format('YYYY-MM-DD')] === true;\n            },\n\n            isInEnabledDates = function (testDate) {\n                return options.enabledDates[testDate.format('YYYY-MM-DD')] === true;\n            },\n\n            isInDisabledHours = function (testDate) {\n                return options.disabledHours[testDate.format('H')] === true;\n            },\n\n            isInEnabledHours = function (testDate) {\n                return options.enabledHours[testDate.format('H')] === true;\n            },\n\n            isValid = function (targetMoment, granularity) {\n                if (!targetMoment.isValid()) {\n                    return false;\n                }\n                if (options.disabledDates && granularity === 'd' && isInDisabledDates(targetMoment)) {\n                    return false;\n                }\n                if (options.enabledDates && granularity === 'd' && !isInEnabledDates(targetMoment)) {\n                    return false;\n                }\n                if (options.minDate && targetMoment.isBefore(options.minDate, granularity)) {\n                    return false;\n                }\n                if (options.maxDate && targetMoment.isAfter(options.maxDate, granularity)) {\n                    return false;\n                }\n                if (options.daysOfWeekDisabled && granularity === 'd' && options.daysOfWeekDisabled.indexOf(targetMoment.day()) !== -1) {\n                    return false;\n                }\n                if (options.disabledHours && (granularity === 'h' || granularity === 'm' || granularity === 's') && isInDisabledHours(targetMoment)) {\n                    return false;\n                }\n                if (options.enabledHours && (granularity === 'h' || granularity === 'm' || granularity === 's') && !isInEnabledHours(targetMoment)) {\n                    return false;\n                }\n                if (options.disabledTimeIntervals && (granularity === 'h' || granularity === 'm' || granularity === 's')) {\n                    var found = false;\n                    $.each(options.disabledTimeIntervals, function () {\n                        if (targetMoment.isBetween(this[0], this[1])) {\n                            found = true;\n                            return false;\n                        }\n                    });\n                    if (found) {\n                        return false;\n                    }\n                }\n                return true;\n            },\n\n            fillMonths = function () {\n                var spans = [],\n                    monthsShort = viewDate.clone().startOf('y').startOf('d');\n                while (monthsShort.isSame(viewDate, 'y')) {\n                    spans.push($('<span>').attr('data-action', 'selectMonth').addClass('month').text(monthsShort.format('MMM')));\n                    monthsShort.add(1, 'M');\n                }\n                widget.find('.datepicker-months td').empty().append(spans);\n            },\n\n            updateMonths = function () {\n                var monthsView = widget.find('.datepicker-months'),\n                    monthsViewHeader = monthsView.find('th'),\n                    months = monthsView.find('tbody').find('span');\n\n                monthsViewHeader.eq(0).find('span').attr('title', options.tooltips.prevYear);\n                monthsViewHeader.eq(1).attr('title', options.tooltips.selectYear);\n                monthsViewHeader.eq(2).find('span').attr('title', options.tooltips.nextYear);\n\n                monthsView.find('.disabled').removeClass('disabled');\n\n                if (!isValid(viewDate.clone().subtract(1, 'y'), 'y')) {\n                    monthsViewHeader.eq(0).addClass('disabled');\n                }\n\n                monthsViewHeader.eq(1).text(viewDate.year());\n\n                if (!isValid(viewDate.clone().add(1, 'y'), 'y')) {\n                    monthsViewHeader.eq(2).addClass('disabled');\n                }\n\n                months.removeClass('active');\n                if (date.isSame(viewDate, 'y') && !unset) {\n                    months.eq(date.month()).addClass('active');\n                }\n\n                months.each(function (index) {\n                    if (!isValid(viewDate.clone().month(index), 'M')) {\n                        $(this).addClass('disabled');\n                    }\n                });\n            },\n\n            updateYears = function () {\n                var yearsView = widget.find('.datepicker-years'),\n                    yearsViewHeader = yearsView.find('th'),\n                    startYear = viewDate.clone().subtract(5, 'y'),\n                    endYear = viewDate.clone().add(6, 'y'),\n                    html = '';\n\n                yearsViewHeader.eq(0).find('span').attr('title', options.tooltips.prevDecade);\n                yearsViewHeader.eq(1).attr('title', options.tooltips.selectDecade);\n                yearsViewHeader.eq(2).find('span').attr('title', options.tooltips.nextDecade);\n\n                yearsView.find('.disabled').removeClass('disabled');\n\n                if (options.minDate && options.minDate.isAfter(startYear, 'y')) {\n                    yearsViewHeader.eq(0).addClass('disabled');\n                }\n\n                yearsViewHeader.eq(1).text(startYear.year() + '-' + endYear.year());\n\n                if (options.maxDate && options.maxDate.isBefore(endYear, 'y')) {\n                    yearsViewHeader.eq(2).addClass('disabled');\n                }\n\n                while (!startYear.isAfter(endYear, 'y')) {\n                    html += '<span data-action=\"selectYear\" class=\"year' + (startYear.isSame(date, 'y') && !unset ? ' active' : '') + (!isValid(startYear, 'y') ? ' disabled' : '') + '\">' + startYear.year() + '</span>';\n                    startYear.add(1, 'y');\n                }\n\n                yearsView.find('td').html(html);\n            },\n\n            updateDecades = function () {\n                var decadesView = widget.find('.datepicker-decades'),\n                    decadesViewHeader = decadesView.find('th'),\n                    startDecade = moment({ y: viewDate.year() - (viewDate.year() % 100) - 1 }),\n                    endDecade = startDecade.clone().add(100, 'y'),\n                    startedAt = startDecade.clone(),\n                    minDateDecade = false,\n                    maxDateDecade = false,\n                    endDecadeYear,\n                    html = '';\n\n                decadesViewHeader.eq(0).find('span').attr('title', options.tooltips.prevCentury);\n                decadesViewHeader.eq(2).find('span').attr('title', options.tooltips.nextCentury);\n\n                decadesView.find('.disabled').removeClass('disabled');\n\n                if (startDecade.isSame(moment({ y: 1900 })) || (options.minDate && options.minDate.isAfter(startDecade, 'y'))) {\n                    decadesViewHeader.eq(0).addClass('disabled');\n                }\n\n                decadesViewHeader.eq(1).text(startDecade.year() + '-' + endDecade.year());\n\n                if (startDecade.isSame(moment({ y: 2000 })) || (options.maxDate && options.maxDate.isBefore(endDecade, 'y'))) {\n                    decadesViewHeader.eq(2).addClass('disabled');\n                }\n\n                while (!startDecade.isAfter(endDecade, 'y')) {\n                    endDecadeYear = startDecade.year() + 12;\n                    minDateDecade = options.minDate && options.minDate.isAfter(startDecade, 'y') && options.minDate.year() <= endDecadeYear;\n                    maxDateDecade = options.maxDate && options.maxDate.isAfter(startDecade, 'y') && options.maxDate.year() <= endDecadeYear;\n                    html += '<span data-action=\"selectDecade\" class=\"decade' + (date.isAfter(startDecade) && date.year() <= endDecadeYear ? ' active' : '') +\n                        (!isValid(startDecade, 'y') && !minDateDecade && !maxDateDecade ? ' disabled' : '') + '\" data-selection=\"' + (startDecade.year() + 6) + '\">' + (startDecade.year() + 1) + ' - ' + (startDecade.year() + 12) + '</span>';\n                    startDecade.add(12, 'y');\n                }\n                html += '<span></span><span></span><span></span>'; //push the dangling block over, at least this way it's even\n\n                decadesView.find('td').html(html);\n                decadesViewHeader.eq(1).text((startedAt.year() + 1) + '-' + (startDecade.year()));\n            },\n\n            fillDate = function () {\n                var daysView = widget.find('.datepicker-days'),\n                    daysViewHeader = daysView.find('th'),\n                    currentDate,\n                    html = [],\n                    row,\n                    clsNames = [],\n                    i;\n\n                if (!hasDate()) {\n                    return;\n                }\n\n                daysViewHeader.eq(0).find('span').attr('title', options.tooltips.prevMonth);\n                daysViewHeader.eq(1).attr('title', options.tooltips.selectMonth);\n                daysViewHeader.eq(2).find('span').attr('title', options.tooltips.nextMonth);\n\n                daysView.find('.disabled').removeClass('disabled');\n                daysViewHeader.eq(1).text(viewDate.format(options.dayViewHeaderFormat));\n\n                if (!isValid(viewDate.clone().subtract(1, 'M'), 'M')) {\n                    daysViewHeader.eq(0).addClass('disabled');\n                }\n                if (!isValid(viewDate.clone().add(1, 'M'), 'M')) {\n                    daysViewHeader.eq(2).addClass('disabled');\n                }\n\n                currentDate = viewDate.clone().startOf('M').startOf('w').startOf('d');\n\n                for (i = 0; i < 42; i++) { //always display 42 days (should show 6 weeks)\n                    if (currentDate.weekday() === 0) {\n                        row = $('<tr>');\n                        if (options.calendarWeeks) {\n                            row.append('<td class=\"cw\">' + currentDate.week() + '</td>');\n                        }\n                        html.push(row);\n                    }\n                    clsNames = ['day'];\n                    if (currentDate.isBefore(viewDate, 'M')) {\n                        clsNames.push('old');\n                    }\n                    if (currentDate.isAfter(viewDate, 'M')) {\n                        clsNames.push('new');\n                    }\n                    if (currentDate.isSame(date, 'd') && !unset) {\n                        clsNames.push('active');\n                    }\n                    if (!isValid(currentDate, 'd')) {\n                        clsNames.push('disabled');\n                    }\n                    if (currentDate.isSame(getMoment(), 'd')) {\n                        clsNames.push('today');\n                    }\n                    if (currentDate.day() === 0 || currentDate.day() === 6) {\n                        clsNames.push('weekend');\n                    }\n                    notifyEvent({\n                        type: 'dp.classify',\n                        date: currentDate,\n                        classNames: clsNames\n                    });\n                    row.append('<td data-action=\"selectDay\" data-day=\"' + currentDate.format('L') + '\" class=\"' + clsNames.join(' ') + '\">' + currentDate.date() + '</td>');\n                    currentDate.add(1, 'd');\n                }\n\n                daysView.find('tbody').empty().append(html);\n\n                updateMonths();\n\n                updateYears();\n\n                updateDecades();\n            },\n\n            fillHours = function () {\n                var table = widget.find('.timepicker-hours table'),\n                    currentHour = viewDate.clone().startOf('d'),\n                    html = [],\n                    row = $('<tr>');\n\n                if (viewDate.hour() > 11 && !use24Hours) {\n                    currentHour.hour(12);\n                }\n                while (currentHour.isSame(viewDate, 'd') && (use24Hours || (viewDate.hour() < 12 && currentHour.hour() < 12) || viewDate.hour() > 11)) {\n                    if (currentHour.hour() % 4 === 0) {\n                        row = $('<tr>');\n                        html.push(row);\n                    }\n                    row.append('<td data-action=\"selectHour\" class=\"hour' + (!isValid(currentHour, 'h') ? ' disabled' : '') + '\">' + currentHour.format(use24Hours ? 'HH' : 'hh') + '</td>');\n                    currentHour.add(1, 'h');\n                }\n                table.empty().append(html);\n            },\n\n            fillMinutes = function () {\n                var table = widget.find('.timepicker-minutes table'),\n                    currentMinute = viewDate.clone().startOf('h'),\n                    html = [],\n                    row = $('<tr>'),\n                    step = options.stepping === 1 ? 5 : options.stepping;\n\n                while (viewDate.isSame(currentMinute, 'h')) {\n                    if (currentMinute.minute() % (step * 4) === 0) {\n                        row = $('<tr>');\n                        html.push(row);\n                    }\n                    row.append('<td data-action=\"selectMinute\" class=\"minute' + (!isValid(currentMinute, 'm') ? ' disabled' : '') + '\">' + currentMinute.format('mm') + '</td>');\n                    currentMinute.add(step, 'm');\n                }\n                table.empty().append(html);\n            },\n\n            fillSeconds = function () {\n                var table = widget.find('.timepicker-seconds table'),\n                    currentSecond = viewDate.clone().startOf('m'),\n                    html = [],\n                    row = $('<tr>');\n\n                while (viewDate.isSame(currentSecond, 'm')) {\n                    if (currentSecond.second() % 20 === 0) {\n                        row = $('<tr>');\n                        html.push(row);\n                    }\n                    row.append('<td data-action=\"selectSecond\" class=\"second' + (!isValid(currentSecond, 's') ? ' disabled' : '') + '\">' + currentSecond.format('ss') + '</td>');\n                    currentSecond.add(5, 's');\n                }\n\n                table.empty().append(html);\n            },\n\n            fillTime = function () {\n                var toggle, newDate, timeComponents = widget.find('.timepicker span[data-time-component]');\n\n                if (!use24Hours) {\n                    toggle = widget.find('.timepicker [data-action=togglePeriod]');\n                    newDate = date.clone().add((date.hours() >= 12) ? -12 : 12, 'h');\n\n                    toggle.text(date.format('A'));\n\n                    if (isValid(newDate, 'h')) {\n                        toggle.removeClass('disabled');\n                    } else {\n                        toggle.addClass('disabled');\n                    }\n                }\n                timeComponents.filter('[data-time-component=hours]').text(date.format(use24Hours ? 'HH' : 'hh'));\n                timeComponents.filter('[data-time-component=minutes]').text(date.format('mm'));\n                timeComponents.filter('[data-time-component=seconds]').text(date.format('ss'));\n\n                fillHours();\n                fillMinutes();\n                fillSeconds();\n            },\n\n            update = function () {\n                if (!widget) {\n                    return;\n                }\n                fillDate();\n                fillTime();\n            },\n\n            setValue = function (targetMoment) {\n                var oldDate = unset ? null : date;\n\n                // case of calling setValue(null or false)\n                if (!targetMoment) {\n                    unset = true;\n                    input.val('');\n                    element.data('date', '');\n                    notifyEvent({\n                        type: 'dp.change',\n                        date: false,\n                        oldDate: oldDate\n                    });\n                    update();\n                    return;\n                }\n\n                targetMoment = targetMoment.clone().locale(options.locale);\n\n                if (hasTimeZone()) {\n                    targetMoment.tz(options.timeZone);\n                }\n\n                if (options.stepping !== 1) {\n                    targetMoment.minutes((Math.round(targetMoment.minutes() / options.stepping) * options.stepping)).seconds(0);\n\n                    while (options.minDate && targetMoment.isBefore(options.minDate)) {\n                        targetMoment.add(options.stepping, 'minutes');\n                    }\n                }\n\n                if (isValid(targetMoment)) {\n                    date = targetMoment;\n                    viewDate = date.clone();\n                    input.val(date.format(actualFormat));\n                    element.data('date', date.format(actualFormat));\n                    unset = false;\n                    update();\n                    notifyEvent({\n                        type: 'dp.change',\n                        date: date.clone(),\n                        oldDate: oldDate\n                    });\n                } else {\n                    if (!options.keepInvalid) {\n                        input.val(unset ? '' : date.format(actualFormat));\n                    } else {\n                        notifyEvent({\n                            type: 'dp.change',\n                            date: targetMoment,\n                            oldDate: oldDate\n                        });\n                    }\n                    notifyEvent({\n                        type: 'dp.error',\n                        date: targetMoment,\n                        oldDate: oldDate\n                    });\n                }\n            },\n\n            /**\n             * Hides the widget. Possibly will emit dp.hide\n             */\n            hide = function () {\n                var transitioning = false;\n                if (!widget) {\n                    return picker;\n                }\n                // Ignore event if in the middle of a picker transition\n                widget.find('.collapse').each(function () {\n                    var collapseData = $(this).data('collapse');\n                    if (collapseData && collapseData.transitioning) {\n                        transitioning = true;\n                        return false;\n                    }\n                    return true;\n                });\n                if (transitioning) {\n                    return picker;\n                }\n                if (component && component.hasClass('btn')) {\n                    component.toggleClass('active');\n                }\n                widget.hide();\n\n                $(window).off('resize', place);\n                widget.off('click', '[data-action]');\n                widget.off('mousedown', false);\n\n                widget.remove();\n                widget = false;\n\n                notifyEvent({\n                    type: 'dp.hide',\n                    date: date.clone()\n                });\n\n                input.blur();\n\n                currentViewMode = 0;\n                viewDate = date.clone();\n\n                return picker;\n            },\n\n            clear = function () {\n                setValue(null);\n            },\n\n            parseInputDate = function (inputDate) {\n                if (options.parseInputDate === undefined) {\n                    if (!moment.isMoment(inputDate) || inputDate instanceof Date) {\n                        inputDate = getMoment(inputDate);\n                    }\n                } else {\n                    inputDate = options.parseInputDate(inputDate);\n                }\n                //inputDate.locale(options.locale);\n                return inputDate;\n            },\n\n            /********************************************************************************\n             *\n             * Widget UI interaction functions\n             *\n             ********************************************************************************/\n            actions = {\n                next: function () {\n                    var navFnc = datePickerModes[currentViewMode].navFnc;\n                    viewDate.add(datePickerModes[currentViewMode].navStep, navFnc);\n                    fillDate();\n                    viewUpdate(navFnc);\n                },\n\n                previous: function () {\n                    var navFnc = datePickerModes[currentViewMode].navFnc;\n                    viewDate.subtract(datePickerModes[currentViewMode].navStep, navFnc);\n                    fillDate();\n                    viewUpdate(navFnc);\n                },\n\n                pickerSwitch: function () {\n                    showMode(1);\n                },\n\n                selectMonth: function (e) {\n                    var month = $(e.target).closest('tbody').find('span').index($(e.target));\n                    viewDate.month(month);\n                    if (currentViewMode === minViewModeNumber) {\n                        setValue(date.clone().year(viewDate.year()).month(viewDate.month()));\n                        if (!options.inline) {\n                            hide();\n                        }\n                    } else {\n                        showMode(-1);\n                        fillDate();\n                    }\n                    viewUpdate('M');\n                },\n\n                selectYear: function (e) {\n                    var year = parseInt($(e.target).text(), 10) || 0;\n                    viewDate.year(year);\n                    if (currentViewMode === minViewModeNumber) {\n                        setValue(date.clone().year(viewDate.year()));\n                        if (!options.inline) {\n                            hide();\n                        }\n                    } else {\n                        showMode(-1);\n                        fillDate();\n                    }\n                    viewUpdate('YYYY');\n                },\n\n                selectDecade: function (e) {\n                    var year = parseInt($(e.target).data('selection'), 10) || 0;\n                    viewDate.year(year);\n                    if (currentViewMode === minViewModeNumber) {\n                        setValue(date.clone().year(viewDate.year()));\n                        if (!options.inline) {\n                            hide();\n                        }\n                    } else {\n                        showMode(-1);\n                        fillDate();\n                    }\n                    viewUpdate('YYYY');\n                },\n\n                selectDay: function (e) {\n                    var day = viewDate.clone();\n                    if ($(e.target).is('.old')) {\n                        day.subtract(1, 'M');\n                    }\n                    if ($(e.target).is('.new')) {\n                        day.add(1, 'M');\n                    }\n                    setValue(day.date(parseInt($(e.target).text(), 10)));\n                    if (!hasTime() && !options.keepOpen && !options.inline) {\n                        hide();\n                    }\n                },\n\n                incrementHours: function () {\n                    var newDate = date.clone().add(1, 'h');\n                    if (isValid(newDate, 'h')) {\n                        setValue(newDate);\n                    }\n                },\n\n                incrementMinutes: function () {\n                    var newDate = date.clone().add(options.stepping, 'm');\n                    if (isValid(newDate, 'm')) {\n                        setValue(newDate);\n                    }\n                },\n\n                incrementSeconds: function () {\n                    var newDate = date.clone().add(1, 's');\n                    if (isValid(newDate, 's')) {\n                        setValue(newDate);\n                    }\n                },\n\n                decrementHours: function () {\n                    var newDate = date.clone().subtract(1, 'h');\n                    if (isValid(newDate, 'h')) {\n                        setValue(newDate);\n                    }\n                },\n\n                decrementMinutes: function () {\n                    var newDate = date.clone().subtract(options.stepping, 'm');\n                    if (isValid(newDate, 'm')) {\n                        setValue(newDate);\n                    }\n                },\n\n                decrementSeconds: function () {\n                    var newDate = date.clone().subtract(1, 's');\n                    if (isValid(newDate, 's')) {\n                        setValue(newDate);\n                    }\n                },\n\n                togglePeriod: function () {\n                    setValue(date.clone().add((date.hours() >= 12) ? -12 : 12, 'h'));\n                },\n\n                togglePicker: function (e) {\n                    var $this = $(e.target),\n                        $parent = $this.closest('ul'),\n                        expanded = $parent.find('.in'),\n                        closed = $parent.find('.collapse:not(.in)'),\n                        collapseData;\n\n                    if (expanded && expanded.length) {\n                        collapseData = expanded.data('collapse');\n                        if (collapseData && collapseData.transitioning) {\n                            return;\n                        }\n                        if (expanded.collapse) { // if collapse plugin is available through bootstrap.js then use it\n                            expanded.collapse('hide');\n                            closed.collapse('show');\n                        } else { // otherwise just toggle in class on the two views\n                            expanded.removeClass('in');\n                            closed.addClass('in');\n                        }\n                        if ($this.is('span')) {\n                            $this.toggleClass(options.icons.time + ' ' + options.icons.date);\n                        } else {\n                            $this.find('span').toggleClass(options.icons.time + ' ' + options.icons.date);\n                        }\n\n                        // NOTE: uncomment if toggled state will be restored in show()\n                        //if (component) {\n                        //    component.find('span').toggleClass(options.icons.time + ' ' + options.icons.date);\n                        //}\n                    }\n                },\n\n                showPicker: function () {\n                    widget.find('.timepicker > div:not(.timepicker-picker)').hide();\n                    widget.find('.timepicker .timepicker-picker').show();\n                },\n\n                showHours: function () {\n                    widget.find('.timepicker .timepicker-picker').hide();\n                    widget.find('.timepicker .timepicker-hours').show();\n                },\n\n                showMinutes: function () {\n                    widget.find('.timepicker .timepicker-picker').hide();\n                    widget.find('.timepicker .timepicker-minutes').show();\n                },\n\n                showSeconds: function () {\n                    widget.find('.timepicker .timepicker-picker').hide();\n                    widget.find('.timepicker .timepicker-seconds').show();\n                },\n\n                selectHour: function (e) {\n                    var hour = parseInt($(e.target).text(), 10);\n\n                    if (!use24Hours) {\n                        if (date.hours() >= 12) {\n                            if (hour !== 12) {\n                                hour += 12;\n                            }\n                        } else {\n                            if (hour === 12) {\n                                hour = 0;\n                            }\n                        }\n                    }\n                    setValue(date.clone().hours(hour));\n                    actions.showPicker.call(picker);\n                },\n\n                selectMinute: function (e) {\n                    setValue(date.clone().minutes(parseInt($(e.target).text(), 10)));\n                    actions.showPicker.call(picker);\n                },\n\n                selectSecond: function (e) {\n                    setValue(date.clone().seconds(parseInt($(e.target).text(), 10)));\n                    actions.showPicker.call(picker);\n                },\n\n                clear: clear,\n\n                today: function () {\n                    var todaysDate = getMoment();\n                    if (isValid(todaysDate, 'd')) {\n                        setValue(todaysDate);\n                    }\n                },\n\n                close: hide\n            },\n\n            doAction = function (e) {\n                if ($(e.currentTarget).is('.disabled')) {\n                    return false;\n                }\n                actions[$(e.currentTarget).data('action')].apply(picker, arguments);\n                return false;\n            },\n\n            /**\n             * Shows the widget. Possibly will emit dp.show and dp.change\n             */\n            show = function () {\n                var currentMoment,\n                    useCurrentGranularity = {\n                        'year': function (m) {\n                            return m.month(0).date(1).hours(0).seconds(0).minutes(0);\n                        },\n                        'month': function (m) {\n                            return m.date(1).hours(0).seconds(0).minutes(0);\n                        },\n                        'day': function (m) {\n                            return m.hours(0).seconds(0).minutes(0);\n                        },\n                        'hour': function (m) {\n                            return m.seconds(0).minutes(0);\n                        },\n                        'minute': function (m) {\n                            return m.seconds(0);\n                        }\n                    };\n\n                if (input.prop('disabled') || (!options.ignoreReadonly && input.prop('readonly')) || widget) {\n                    return picker;\n                }\n                if (input.val() !== undefined && input.val().trim().length !== 0) {\n                    setValue(parseInputDate(input.val().trim()));\n                } else if (unset && options.useCurrent && (options.inline || (input.is('input') && input.val().trim().length === 0))) {\n                    currentMoment = getMoment();\n                    if (typeof options.useCurrent === 'string') {\n                        currentMoment = useCurrentGranularity[options.useCurrent](currentMoment);\n                    }\n                    setValue(currentMoment);\n                }\n                widget = getTemplate();\n\n                fillDow();\n                fillMonths();\n\n                widget.find('.timepicker-hours').hide();\n                widget.find('.timepicker-minutes').hide();\n                widget.find('.timepicker-seconds').hide();\n\n                update();\n                showMode();\n\n                $(window).on('resize', place);\n                widget.on('click', '[data-action]', doAction); // this handles clicks on the widget\n                widget.on('mousedown', false);\n\n                if (component && component.hasClass('btn')) {\n                    component.toggleClass('active');\n                }\n                place();\n                widget.show();\n                if (options.focusOnShow && !input.is(':focus')) {\n                    input.focus();\n                }\n\n                notifyEvent({\n                    type: 'dp.show'\n                });\n                return picker;\n            },\n\n            /**\n             * Shows or hides the widget\n             */\n            toggle = function () {\n                return (widget ? hide() : show());\n            },\n\n            keydown = function (e) {\n                var handler = null,\n                    index,\n                    index2,\n                    pressedKeys = [],\n                    pressedModifiers = {},\n                    currentKey = e.which,\n                    keyBindKeys,\n                    allModifiersPressed,\n                    pressed = 'p';\n\n                keyState[currentKey] = pressed;\n\n                for (index in keyState) {\n                    if (keyState.hasOwnProperty(index) && keyState[index] === pressed) {\n                        pressedKeys.push(index);\n                        if (parseInt(index, 10) !== currentKey) {\n                            pressedModifiers[index] = true;\n                        }\n                    }\n                }\n\n                for (index in options.keyBinds) {\n                    if (options.keyBinds.hasOwnProperty(index) && typeof (options.keyBinds[index]) === 'function') {\n                        keyBindKeys = index.split(' ');\n                        if (keyBindKeys.length === pressedKeys.length && keyMap[currentKey] === keyBindKeys[keyBindKeys.length - 1]) {\n                            allModifiersPressed = true;\n                            for (index2 = keyBindKeys.length - 2; index2 >= 0; index2--) {\n                                if (!(keyMap[keyBindKeys[index2]] in pressedModifiers)) {\n                                    allModifiersPressed = false;\n                                    break;\n                                }\n                            }\n                            if (allModifiersPressed) {\n                                handler = options.keyBinds[index];\n                                break;\n                            }\n                        }\n                    }\n                }\n\n                if (handler) {\n                    handler.call(picker, widget);\n                    e.stopPropagation();\n                    e.preventDefault();\n                }\n            },\n\n            keyup = function (e) {\n                keyState[e.which] = 'r';\n                e.stopPropagation();\n                e.preventDefault();\n            },\n\n            change = function (e) {\n                var val = $(e.target).val().trim(),\n                    parsedDate = val ? parseInputDate(val) : null;\n                setValue(parsedDate);\n                e.stopImmediatePropagation();\n                return false;\n            },\n\n            attachDatePickerElementEvents = function () {\n                input.on({\n                    'change': change,\n                    'blur': options.debug ? '' : hide,\n                    'keydown': keydown,\n                    'keyup': keyup,\n                    'focus': options.allowInputToggle ? show : ''\n                });\n\n                if (element.is('input')) {\n                    input.on({\n                        'focus': show\n                    });\n                } else if (component) {\n                    component.on('click', toggle);\n                    component.on('mousedown', false);\n                }\n            },\n\n            detachDatePickerElementEvents = function () {\n                input.off({\n                    'change': change,\n                    'blur': blur,\n                    'keydown': keydown,\n                    'keyup': keyup,\n                    'focus': options.allowInputToggle ? hide : ''\n                });\n\n                if (element.is('input')) {\n                    input.off({\n                        'focus': show\n                    });\n                } else if (component) {\n                    component.off('click', toggle);\n                    component.off('mousedown', false);\n                }\n            },\n\n            indexGivenDates = function (givenDatesArray) {\n                // Store given enabledDates and disabledDates as keys.\n                // This way we can check their existence in O(1) time instead of looping through whole array.\n                // (for example: options.enabledDates['2014-02-27'] === true)\n                var givenDatesIndexed = {};\n                $.each(givenDatesArray, function () {\n                    var dDate = parseInputDate(this);\n                    if (dDate.isValid()) {\n                        givenDatesIndexed[dDate.format('YYYY-MM-DD')] = true;\n                    }\n                });\n                return (Object.keys(givenDatesIndexed).length) ? givenDatesIndexed : false;\n            },\n\n            indexGivenHours = function (givenHoursArray) {\n                // Store given enabledHours and disabledHours as keys.\n                // This way we can check their existence in O(1) time instead of looping through whole array.\n                // (for example: options.enabledHours['2014-02-27'] === true)\n                var givenHoursIndexed = {};\n                $.each(givenHoursArray, function () {\n                    givenHoursIndexed[this] = true;\n                });\n                return (Object.keys(givenHoursIndexed).length) ? givenHoursIndexed : false;\n            },\n\n            initFormatting = function () {\n                var format = options.format || 'L LT';\n\n                actualFormat = format.replace(/(\\[[^\\[]*\\])|(\\\\)?(LTS|LT|LL?L?L?|l{1,4})/g, function (formatInput) {\n                    var newinput = date.localeData().longDateFormat(formatInput) || formatInput;\n                    return newinput.replace(/(\\[[^\\[]*\\])|(\\\\)?(LTS|LT|LL?L?L?|l{1,4})/g, function (formatInput2) { //temp fix for #740\n                        return date.localeData().longDateFormat(formatInput2) || formatInput2;\n                    });\n                });\n\n\n                parseFormats = options.extraFormats ? options.extraFormats.slice() : [];\n                if (parseFormats.indexOf(format) < 0 && parseFormats.indexOf(actualFormat) < 0) {\n                    parseFormats.push(actualFormat);\n                }\n\n                use24Hours = (actualFormat.toLowerCase().indexOf('a') < 1 && actualFormat.replace(/\\[.*?\\]/g, '').indexOf('h') < 1);\n\n                if (isEnabled('y')) {\n                    minViewModeNumber = 2;\n                }\n                if (isEnabled('M')) {\n                    minViewModeNumber = 1;\n                }\n                if (isEnabled('d')) {\n                    minViewModeNumber = 0;\n                }\n\n                currentViewMode = Math.max(minViewModeNumber, currentViewMode);\n\n                if (!unset) {\n                    setValue(date);\n                }\n            };\n\n        /********************************************************************************\n         *\n         * Public API functions\n         * =====================\n         *\n         * Important: Do not expose direct references to private objects or the options\n         * object to the outer world. Always return a clone when returning values or make\n         * a clone when setting a private variable.\n         *\n         ********************************************************************************/\n        picker.destroy = function () {\n            ///<summary>Destroys the widget and removes all attached event listeners</summary>\n            hide();\n            detachDatePickerElementEvents();\n            element.removeData('DateTimePicker');\n            element.removeData('date');\n        };\n\n        picker.toggle = toggle;\n\n        picker.show = show;\n\n        picker.hide = hide;\n\n        picker.disable = function () {\n            ///<summary>Disables the input element, the component is attached to, by adding a disabled=\"true\" attribute to it.\n            ///If the widget was visible before that call it is hidden. Possibly emits dp.hide</summary>\n            hide();\n            if (component && component.hasClass('btn')) {\n                component.addClass('disabled');\n            }\n            input.prop('disabled', true);\n            return picker;\n        };\n\n        picker.enable = function () {\n            ///<summary>Enables the input element, the component is attached to, by removing disabled attribute from it.</summary>\n            if (component && component.hasClass('btn')) {\n                component.removeClass('disabled');\n            }\n            input.prop('disabled', false);\n            return picker;\n        };\n\n        picker.ignoreReadonly = function (ignoreReadonly) {\n            if (arguments.length === 0) {\n                return options.ignoreReadonly;\n            }\n            if (typeof ignoreReadonly !== 'boolean') {\n                throw new TypeError('ignoreReadonly () expects a boolean parameter');\n            }\n            options.ignoreReadonly = ignoreReadonly;\n            return picker;\n        };\n\n        picker.options = function (newOptions) {\n            if (arguments.length === 0) {\n                return $.extend(true, {}, options);\n            }\n\n            if (!(newOptions instanceof Object)) {\n                throw new TypeError('options() options parameter should be an object');\n            }\n            $.extend(true, options, newOptions);\n            $.each(options, function (key, value) {\n                if (picker[key] !== undefined) {\n                    picker[key](value);\n                } else {\n                    throw new TypeError('option ' + key + ' is not recognized!');\n                }\n            });\n            return picker;\n        };\n\n        picker.date = function (newDate) {\n            ///<signature helpKeyword=\"$.fn.datetimepicker.date\">\n            ///<summary>Returns the component's model current date, a moment object or null if not set.</summary>\n            ///<returns type=\"Moment\">date.clone()</returns>\n            ///</signature>\n            ///<signature>\n            ///<summary>Sets the components model current moment to it. Passing a null value unsets the components model current moment. Parsing of the newDate parameter is made using moment library with the options.format and options.useStrict components configuration.</summary>\n            ///<param name=\"newDate\" locid=\"$.fn.datetimepicker.date_p:newDate\">Takes string, Date, moment, null parameter.</param>\n            ///</signature>\n            if (arguments.length === 0) {\n                if (unset) {\n                    return null;\n                }\n                return date.clone();\n            }\n\n            if (newDate !== null && typeof newDate !== 'string' && !moment.isMoment(newDate) && !(newDate instanceof Date)) {\n                throw new TypeError('date() parameter must be one of [null, string, moment or Date]');\n            }\n\n            setValue(newDate === null ? null : parseInputDate(newDate));\n            return picker;\n        };\n\n        picker.format = function (newFormat) {\n            ///<summary>test su</summary>\n            ///<param name=\"newFormat\">info about para</param>\n            ///<returns type=\"string|boolean\">returns foo</returns>\n            if (arguments.length === 0) {\n                return options.format;\n            }\n\n            if ((typeof newFormat !== 'string') && ((typeof newFormat !== 'boolean') || (newFormat !== false))) {\n                throw new TypeError('format() expects a string or boolean:false parameter ' + newFormat);\n            }\n\n            options.format = newFormat;\n            if (actualFormat) {\n                initFormatting(); // reinit formatting\n            }\n            return picker;\n        };\n\n        picker.timeZone = function (newZone) {\n            if (arguments.length === 0) {\n                return options.timeZone;\n            }\n\n            if (typeof newZone !== 'string') {\n                throw new TypeError('newZone() expects a string parameter');\n            }\n\n            options.timeZone = newZone;\n\n            return picker;\n        };\n\n        picker.dayViewHeaderFormat = function (newFormat) {\n            if (arguments.length === 0) {\n                return options.dayViewHeaderFormat;\n            }\n\n            if (typeof newFormat !== 'string') {\n                throw new TypeError('dayViewHeaderFormat() expects a string parameter');\n            }\n\n            options.dayViewHeaderFormat = newFormat;\n            return picker;\n        };\n\n        picker.extraFormats = function (formats) {\n            if (arguments.length === 0) {\n                return options.extraFormats;\n            }\n\n            if (formats !== false && !(formats instanceof Array)) {\n                throw new TypeError('extraFormats() expects an array or false parameter');\n            }\n\n            options.extraFormats = formats;\n            if (parseFormats) {\n                initFormatting(); // reinit formatting\n            }\n            return picker;\n        };\n\n        picker.disabledDates = function (dates) {\n            ///<signature helpKeyword=\"$.fn.datetimepicker.disabledDates\">\n            ///<summary>Returns an array with the currently set disabled dates on the component.</summary>\n            ///<returns type=\"array\">options.disabledDates</returns>\n            ///</signature>\n            ///<signature>\n            ///<summary>Setting this takes precedence over options.minDate, options.maxDate configuration. Also calling this function removes the configuration of\n            ///options.enabledDates if such exist.</summary>\n            ///<param name=\"dates\" locid=\"$.fn.datetimepicker.disabledDates_p:dates\">Takes an [ string or Date or moment ] of values and allows the user to select only from those days.</param>\n            ///</signature>\n            if (arguments.length === 0) {\n                return (options.disabledDates ? $.extend({}, options.disabledDates) : options.disabledDates);\n            }\n\n            if (!dates) {\n                options.disabledDates = false;\n                update();\n                return picker;\n            }\n            if (!(dates instanceof Array)) {\n                throw new TypeError('disabledDates() expects an array parameter');\n            }\n            options.disabledDates = indexGivenDates(dates);\n            options.enabledDates = false;\n            update();\n            return picker;\n        };\n\n        picker.enabledDates = function (dates) {\n            ///<signature helpKeyword=\"$.fn.datetimepicker.enabledDates\">\n            ///<summary>Returns an array with the currently set enabled dates on the component.</summary>\n            ///<returns type=\"array\">options.enabledDates</returns>\n            ///</signature>\n            ///<signature>\n            ///<summary>Setting this takes precedence over options.minDate, options.maxDate configuration. Also calling this function removes the configuration of options.disabledDates if such exist.</summary>\n            ///<param name=\"dates\" locid=\"$.fn.datetimepicker.enabledDates_p:dates\">Takes an [ string or Date or moment ] of values and allows the user to select only from those days.</param>\n            ///</signature>\n            if (arguments.length === 0) {\n                return (options.enabledDates ? $.extend({}, options.enabledDates) : options.enabledDates);\n            }\n\n            if (!dates) {\n                options.enabledDates = false;\n                update();\n                return picker;\n            }\n            if (!(dates instanceof Array)) {\n                throw new TypeError('enabledDates() expects an array parameter');\n            }\n            options.enabledDates = indexGivenDates(dates);\n            options.disabledDates = false;\n            update();\n            return picker;\n        };\n\n        picker.daysOfWeekDisabled = function (daysOfWeekDisabled) {\n            if (arguments.length === 0) {\n                return options.daysOfWeekDisabled.splice(0);\n            }\n\n            if ((typeof daysOfWeekDisabled === 'boolean') && !daysOfWeekDisabled) {\n                options.daysOfWeekDisabled = false;\n                update();\n                return picker;\n            }\n\n            if (!(daysOfWeekDisabled instanceof Array)) {\n                throw new TypeError('daysOfWeekDisabled() expects an array parameter');\n            }\n            options.daysOfWeekDisabled = daysOfWeekDisabled.reduce(function (previousValue, currentValue) {\n                currentValue = parseInt(currentValue, 10);\n                if (currentValue > 6 || currentValue < 0 || isNaN(currentValue)) {\n                    return previousValue;\n                }\n                if (previousValue.indexOf(currentValue) === -1) {\n                    previousValue.push(currentValue);\n                }\n                return previousValue;\n            }, []).sort();\n            if (options.useCurrent && !options.keepInvalid) {\n                var tries = 0;\n                while (!isValid(date, 'd')) {\n                    date.add(1, 'd');\n                    if (tries === 31) {\n                        throw 'Tried 31 times to find a valid date';\n                    }\n                    tries++;\n                }\n                setValue(date);\n            }\n            update();\n            return picker;\n        };\n\n        picker.maxDate = function (maxDate) {\n            if (arguments.length === 0) {\n                return options.maxDate ? options.maxDate.clone() : options.maxDate;\n            }\n\n            if ((typeof maxDate === 'boolean') && maxDate === false) {\n                options.maxDate = false;\n                update();\n                return picker;\n            }\n\n            if (typeof maxDate === 'string') {\n                if (maxDate === 'now' || maxDate === 'moment') {\n                    maxDate = getMoment();\n                }\n            }\n\n            var parsedDate = parseInputDate(maxDate);\n\n            if (!parsedDate.isValid()) {\n                throw new TypeError('maxDate() Could not parse date parameter: ' + maxDate);\n            }\n            if (options.minDate && parsedDate.isBefore(options.minDate)) {\n                throw new TypeError('maxDate() date parameter is before options.minDate: ' + parsedDate.format(actualFormat));\n            }\n            options.maxDate = parsedDate;\n            if (options.useCurrent && !options.keepInvalid && date.isAfter(maxDate)) {\n                setValue(options.maxDate);\n            }\n            if (viewDate.isAfter(parsedDate)) {\n                viewDate = parsedDate.clone().subtract(options.stepping, 'm');\n            }\n            update();\n            return picker;\n        };\n\n        picker.minDate = function (minDate) {\n            if (arguments.length === 0) {\n                return options.minDate ? options.minDate.clone() : options.minDate;\n            }\n\n            if ((typeof minDate === 'boolean') && minDate === false) {\n                options.minDate = false;\n                update();\n                return picker;\n            }\n\n            if (typeof minDate === 'string') {\n                if (minDate === 'now' || minDate === 'moment') {\n                    minDate = getMoment();\n                }\n            }\n\n            var parsedDate = parseInputDate(minDate);\n\n            if (!parsedDate.isValid()) {\n                throw new TypeError('minDate() Could not parse date parameter: ' + minDate);\n            }\n            if (options.maxDate && parsedDate.isAfter(options.maxDate)) {\n                throw new TypeError('minDate() date parameter is after options.maxDate: ' + parsedDate.format(actualFormat));\n            }\n            options.minDate = parsedDate;\n            if (options.useCurrent && !options.keepInvalid && date.isBefore(minDate)) {\n                setValue(options.minDate);\n            }\n            if (viewDate.isBefore(parsedDate)) {\n                viewDate = parsedDate.clone().add(options.stepping, 'm');\n            }\n            update();\n            return picker;\n        };\n\n        picker.defaultDate = function (defaultDate) {\n            ///<signature helpKeyword=\"$.fn.datetimepicker.defaultDate\">\n            ///<summary>Returns a moment with the options.defaultDate option configuration or false if not set</summary>\n            ///<returns type=\"Moment\">date.clone()</returns>\n            ///</signature>\n            ///<signature>\n            ///<summary>Will set the picker's inital date. If a boolean:false value is passed the options.defaultDate parameter is cleared.</summary>\n            ///<param name=\"defaultDate\" locid=\"$.fn.datetimepicker.defaultDate_p:defaultDate\">Takes a string, Date, moment, boolean:false</param>\n            ///</signature>\n            if (arguments.length === 0) {\n                return options.defaultDate ? options.defaultDate.clone() : options.defaultDate;\n            }\n            if (!defaultDate) {\n                options.defaultDate = false;\n                return picker;\n            }\n\n            if (typeof defaultDate === 'string') {\n                if (defaultDate === 'now' || defaultDate === 'moment') {\n                    defaultDate = getMoment();\n                } else {\n                    defaultDate = getMoment(defaultDate);\n                }\n            }\n\n            var parsedDate = parseInputDate(defaultDate);\n            if (!parsedDate.isValid()) {\n                throw new TypeError('defaultDate() Could not parse date parameter: ' + defaultDate);\n            }\n            if (!isValid(parsedDate)) {\n                throw new TypeError('defaultDate() date passed is invalid according to component setup validations');\n            }\n\n            options.defaultDate = parsedDate;\n\n            if ((options.defaultDate && options.inline) || input.val().trim() === '') {\n                setValue(options.defaultDate);\n            }\n            return picker;\n        };\n\n        picker.locale = function (locale) {\n            if (arguments.length === 0) {\n                return options.locale;\n            }\n\n            if (!moment.localeData(locale)) {\n                throw new TypeError('locale() locale ' + locale + ' is not loaded from moment locales!');\n            }\n\n            options.locale = locale;\n            date.locale(options.locale);\n            viewDate.locale(options.locale);\n\n            if (actualFormat) {\n                initFormatting(); // reinit formatting\n            }\n            if (widget) {\n                hide();\n                show();\n            }\n            return picker;\n        };\n\n        picker.stepping = function (stepping) {\n            if (arguments.length === 0) {\n                return options.stepping;\n            }\n\n            stepping = parseInt(stepping, 10);\n            if (isNaN(stepping) || stepping < 1) {\n                stepping = 1;\n            }\n            options.stepping = stepping;\n            return picker;\n        };\n\n        picker.useCurrent = function (useCurrent) {\n            var useCurrentOptions = ['year', 'month', 'day', 'hour', 'minute'];\n            if (arguments.length === 0) {\n                return options.useCurrent;\n            }\n\n            if ((typeof useCurrent !== 'boolean') && (typeof useCurrent !== 'string')) {\n                throw new TypeError('useCurrent() expects a boolean or string parameter');\n            }\n            if (typeof useCurrent === 'string' && useCurrentOptions.indexOf(useCurrent.toLowerCase()) === -1) {\n                throw new TypeError('useCurrent() expects a string parameter of ' + useCurrentOptions.join(', '));\n            }\n            options.useCurrent = useCurrent;\n            return picker;\n        };\n\n        picker.collapse = function (collapse) {\n            if (arguments.length === 0) {\n                return options.collapse;\n            }\n\n            if (typeof collapse !== 'boolean') {\n                throw new TypeError('collapse() expects a boolean parameter');\n            }\n            if (options.collapse === collapse) {\n                return picker;\n            }\n            options.collapse = collapse;\n            if (widget) {\n                hide();\n                show();\n            }\n            return picker;\n        };\n\n        picker.icons = function (icons) {\n            if (arguments.length === 0) {\n                return $.extend({}, options.icons);\n            }\n\n            if (!(icons instanceof Object)) {\n                throw new TypeError('icons() expects parameter to be an Object');\n            }\n            $.extend(options.icons, icons);\n            if (widget) {\n                hide();\n                show();\n            }\n            return picker;\n        };\n\n        picker.tooltips = function (tooltips) {\n            if (arguments.length === 0) {\n                return $.extend({}, options.tooltips);\n            }\n\n            if (!(tooltips instanceof Object)) {\n                throw new TypeError('tooltips() expects parameter to be an Object');\n            }\n            $.extend(options.tooltips, tooltips);\n            if (widget) {\n                hide();\n                show();\n            }\n            return picker;\n        };\n\n        picker.useStrict = function (useStrict) {\n            if (arguments.length === 0) {\n                return options.useStrict;\n            }\n\n            if (typeof useStrict !== 'boolean') {\n                throw new TypeError('useStrict() expects a boolean parameter');\n            }\n            options.useStrict = useStrict;\n            return picker;\n        };\n\n        picker.sideBySide = function (sideBySide) {\n            if (arguments.length === 0) {\n                return options.sideBySide;\n            }\n\n            if (typeof sideBySide !== 'boolean') {\n                throw new TypeError('sideBySide() expects a boolean parameter');\n            }\n            options.sideBySide = sideBySide;\n            if (widget) {\n                hide();\n                show();\n            }\n            return picker;\n        };\n\n        picker.viewMode = function (viewMode) {\n            if (arguments.length === 0) {\n                return options.viewMode;\n            }\n\n            if (typeof viewMode !== 'string') {\n                throw new TypeError('viewMode() expects a string parameter');\n            }\n\n            if (viewModes.indexOf(viewMode) === -1) {\n                throw new TypeError('viewMode() parameter must be one of (' + viewModes.join(', ') + ') value');\n            }\n\n            options.viewMode = viewMode;\n            currentViewMode = Math.max(viewModes.indexOf(viewMode), minViewModeNumber);\n\n            showMode();\n            return picker;\n        };\n\n        picker.toolbarPlacement = function (toolbarPlacement) {\n            if (arguments.length === 0) {\n                return options.toolbarPlacement;\n            }\n\n            if (typeof toolbarPlacement !== 'string') {\n                throw new TypeError('toolbarPlacement() expects a string parameter');\n            }\n            if (toolbarPlacements.indexOf(toolbarPlacement) === -1) {\n                throw new TypeError('toolbarPlacement() parameter must be one of (' + toolbarPlacements.join(', ') + ') value');\n            }\n            options.toolbarPlacement = toolbarPlacement;\n\n            if (widget) {\n                hide();\n                show();\n            }\n            return picker;\n        };\n\n        picker.widgetPositioning = function (widgetPositioning) {\n            if (arguments.length === 0) {\n                return $.extend({}, options.widgetPositioning);\n            }\n\n            if (({}).toString.call(widgetPositioning) !== '[object Object]') {\n                throw new TypeError('widgetPositioning() expects an object variable');\n            }\n            if (widgetPositioning.horizontal) {\n                if (typeof widgetPositioning.horizontal !== 'string') {\n                    throw new TypeError('widgetPositioning() horizontal variable must be a string');\n                }\n                widgetPositioning.horizontal = widgetPositioning.horizontal.toLowerCase();\n                if (horizontalModes.indexOf(widgetPositioning.horizontal) === -1) {\n                    throw new TypeError('widgetPositioning() expects horizontal parameter to be one of (' + horizontalModes.join(', ') + ')');\n                }\n                options.widgetPositioning.horizontal = widgetPositioning.horizontal;\n            }\n            if (widgetPositioning.vertical) {\n                if (typeof widgetPositioning.vertical !== 'string') {\n                    throw new TypeError('widgetPositioning() vertical variable must be a string');\n                }\n                widgetPositioning.vertical = widgetPositioning.vertical.toLowerCase();\n                if (verticalModes.indexOf(widgetPositioning.vertical) === -1) {\n                    throw new TypeError('widgetPositioning() expects vertical parameter to be one of (' + verticalModes.join(', ') + ')');\n                }\n                options.widgetPositioning.vertical = widgetPositioning.vertical;\n            }\n            update();\n            return picker;\n        };\n\n        picker.calendarWeeks = function (calendarWeeks) {\n            if (arguments.length === 0) {\n                return options.calendarWeeks;\n            }\n\n            if (typeof calendarWeeks !== 'boolean') {\n                throw new TypeError('calendarWeeks() expects parameter to be a boolean value');\n            }\n\n            options.calendarWeeks = calendarWeeks;\n            update();\n            return picker;\n        };\n\n        picker.showTodayButton = function (showTodayButton) {\n            if (arguments.length === 0) {\n                return options.showTodayButton;\n            }\n\n            if (typeof showTodayButton !== 'boolean') {\n                throw new TypeError('showTodayButton() expects a boolean parameter');\n            }\n\n            options.showTodayButton = showTodayButton;\n            if (widget) {\n                hide();\n                show();\n            }\n            return picker;\n        };\n\n        picker.showClear = function (showClear) {\n            if (arguments.length === 0) {\n                return options.showClear;\n            }\n\n            if (typeof showClear !== 'boolean') {\n                throw new TypeError('showClear() expects a boolean parameter');\n            }\n\n            options.showClear = showClear;\n            if (widget) {\n                hide();\n                show();\n            }\n            return picker;\n        };\n\n        picker.widgetParent = function (widgetParent) {\n            if (arguments.length === 0) {\n                return options.widgetParent;\n            }\n\n            if (typeof widgetParent === 'string') {\n                widgetParent = $(widgetParent);\n            }\n\n            if (widgetParent !== null && (typeof widgetParent !== 'string' && !(widgetParent instanceof $))) {\n                throw new TypeError('widgetParent() expects a string or a jQuery object parameter');\n            }\n\n            options.widgetParent = widgetParent;\n            if (widget) {\n                hide();\n                show();\n            }\n            return picker;\n        };\n\n        picker.keepOpen = function (keepOpen) {\n            if (arguments.length === 0) {\n                return options.keepOpen;\n            }\n\n            if (typeof keepOpen !== 'boolean') {\n                throw new TypeError('keepOpen() expects a boolean parameter');\n            }\n\n            options.keepOpen = keepOpen;\n            return picker;\n        };\n\n        picker.focusOnShow = function (focusOnShow) {\n            if (arguments.length === 0) {\n                return options.focusOnShow;\n            }\n\n            if (typeof focusOnShow !== 'boolean') {\n                throw new TypeError('focusOnShow() expects a boolean parameter');\n            }\n\n            options.focusOnShow = focusOnShow;\n            return picker;\n        };\n\n        picker.inline = function (inline) {\n            if (arguments.length === 0) {\n                return options.inline;\n            }\n\n            if (typeof inline !== 'boolean') {\n                throw new TypeError('inline() expects a boolean parameter');\n            }\n\n            options.inline = inline;\n            return picker;\n        };\n\n        picker.clear = function () {\n            clear();\n            return picker;\n        };\n\n        picker.keyBinds = function (keyBinds) {\n            if (arguments.length === 0) {\n                return options.keyBinds;\n            }\n\n            options.keyBinds = keyBinds;\n            return picker;\n        };\n\n        picker.getMoment = function (d) {\n            return getMoment(d);\n        };\n\n        picker.debug = function (debug) {\n            if (typeof debug !== 'boolean') {\n                throw new TypeError('debug() expects a boolean parameter');\n            }\n\n            options.debug = debug;\n            return picker;\n        };\n\n        picker.allowInputToggle = function (allowInputToggle) {\n            if (arguments.length === 0) {\n                return options.allowInputToggle;\n            }\n\n            if (typeof allowInputToggle !== 'boolean') {\n                throw new TypeError('allowInputToggle() expects a boolean parameter');\n            }\n\n            options.allowInputToggle = allowInputToggle;\n            return picker;\n        };\n\n        picker.showClose = function (showClose) {\n            if (arguments.length === 0) {\n                return options.showClose;\n            }\n\n            if (typeof showClose !== 'boolean') {\n                throw new TypeError('showClose() expects a boolean parameter');\n            }\n\n            options.showClose = showClose;\n            return picker;\n        };\n\n        picker.keepInvalid = function (keepInvalid) {\n            if (arguments.length === 0) {\n                return options.keepInvalid;\n            }\n\n            if (typeof keepInvalid !== 'boolean') {\n                throw new TypeError('keepInvalid() expects a boolean parameter');\n            }\n            options.keepInvalid = keepInvalid;\n            return picker;\n        };\n\n        picker.datepickerInput = function (datepickerInput) {\n            if (arguments.length === 0) {\n                return options.datepickerInput;\n            }\n\n            if (typeof datepickerInput !== 'string') {\n                throw new TypeError('datepickerInput() expects a string parameter');\n            }\n\n            options.datepickerInput = datepickerInput;\n            return picker;\n        };\n\n        picker.parseInputDate = function (parseInputDate) {\n            if (arguments.length === 0) {\n                return options.parseInputDate;\n            }\n\n            if (typeof parseInputDate !== 'function') {\n                throw new TypeError('parseInputDate() sholud be as function');\n            }\n\n            options.parseInputDate = parseInputDate;\n\n            return picker;\n        };\n\n        picker.disabledTimeIntervals = function (disabledTimeIntervals) {\n            ///<signature helpKeyword=\"$.fn.datetimepicker.disabledTimeIntervals\">\n            ///<summary>Returns an array with the currently set disabled dates on the component.</summary>\n            ///<returns type=\"array\">options.disabledTimeIntervals</returns>\n            ///</signature>\n            ///<signature>\n            ///<summary>Setting this takes precedence over options.minDate, options.maxDate configuration. Also calling this function removes the configuration of\n            ///options.enabledDates if such exist.</summary>\n            ///<param name=\"dates\" locid=\"$.fn.datetimepicker.disabledTimeIntervals_p:dates\">Takes an [ string or Date or moment ] of values and allows the user to select only from those days.</param>\n            ///</signature>\n            if (arguments.length === 0) {\n                return (options.disabledTimeIntervals ? $.extend({}, options.disabledTimeIntervals) : options.disabledTimeIntervals);\n            }\n\n            if (!disabledTimeIntervals) {\n                options.disabledTimeIntervals = false;\n                update();\n                return picker;\n            }\n            if (!(disabledTimeIntervals instanceof Array)) {\n                throw new TypeError('disabledTimeIntervals() expects an array parameter');\n            }\n            options.disabledTimeIntervals = disabledTimeIntervals;\n            update();\n            return picker;\n        };\n\n        picker.disabledHours = function (hours) {\n            ///<signature helpKeyword=\"$.fn.datetimepicker.disabledHours\">\n            ///<summary>Returns an array with the currently set disabled hours on the component.</summary>\n            ///<returns type=\"array\">options.disabledHours</returns>\n            ///</signature>\n            ///<signature>\n            ///<summary>Setting this takes precedence over options.minDate, options.maxDate configuration. Also calling this function removes the configuration of\n            ///options.enabledHours if such exist.</summary>\n            ///<param name=\"hours\" locid=\"$.fn.datetimepicker.disabledHours_p:hours\">Takes an [ int ] of values and disallows the user to select only from those hours.</param>\n            ///</signature>\n            if (arguments.length === 0) {\n                return (options.disabledHours ? $.extend({}, options.disabledHours) : options.disabledHours);\n            }\n\n            if (!hours) {\n                options.disabledHours = false;\n                update();\n                return picker;\n            }\n            if (!(hours instanceof Array)) {\n                throw new TypeError('disabledHours() expects an array parameter');\n            }\n            options.disabledHours = indexGivenHours(hours);\n            options.enabledHours = false;\n            if (options.useCurrent && !options.keepInvalid) {\n                var tries = 0;\n                while (!isValid(date, 'h')) {\n                    date.add(1, 'h');\n                    if (tries === 24) {\n                        throw 'Tried 24 times to find a valid date';\n                    }\n                    tries++;\n                }\n                setValue(date);\n            }\n            update();\n            return picker;\n        };\n\n        picker.enabledHours = function (hours) {\n            ///<signature helpKeyword=\"$.fn.datetimepicker.enabledHours\">\n            ///<summary>Returns an array with the currently set enabled hours on the component.</summary>\n            ///<returns type=\"array\">options.enabledHours</returns>\n            ///</signature>\n            ///<signature>\n            ///<summary>Setting this takes precedence over options.minDate, options.maxDate configuration. Also calling this function removes the configuration of options.disabledHours if such exist.</summary>\n            ///<param name=\"hours\" locid=\"$.fn.datetimepicker.enabledHours_p:hours\">Takes an [ int ] of values and allows the user to select only from those hours.</param>\n            ///</signature>\n            if (arguments.length === 0) {\n                return (options.enabledHours ? $.extend({}, options.enabledHours) : options.enabledHours);\n            }\n\n            if (!hours) {\n                options.enabledHours = false;\n                update();\n                return picker;\n            }\n            if (!(hours instanceof Array)) {\n                throw new TypeError('enabledHours() expects an array parameter');\n            }\n            options.enabledHours = indexGivenHours(hours);\n            options.disabledHours = false;\n            if (options.useCurrent && !options.keepInvalid) {\n                var tries = 0;\n                while (!isValid(date, 'h')) {\n                    date.add(1, 'h');\n                    if (tries === 24) {\n                        throw 'Tried 24 times to find a valid date';\n                    }\n                    tries++;\n                }\n                setValue(date);\n            }\n            update();\n            return picker;\n        };\n        /**\n         * Returns the component's model current viewDate, a moment object or null if not set. Passing a null value unsets the components model current moment. Parsing of the newDate parameter is made using moment library with the options.format and options.useStrict components configuration.\n         * @param {Takes string, viewDate, moment, null parameter.} newDate\n         * @returns {viewDate.clone()}\n         */\n        picker.viewDate = function (newDate) {\n            if (arguments.length === 0) {\n                return viewDate.clone();\n            }\n\n            if (!newDate) {\n                viewDate = date.clone();\n                return picker;\n            }\n\n            if (typeof newDate !== 'string' && !moment.isMoment(newDate) && !(newDate instanceof Date)) {\n                throw new TypeError('viewDate() parameter must be one of [string, moment or Date]');\n            }\n\n            viewDate = parseInputDate(newDate);\n            viewUpdate();\n            return picker;\n        };\n\n        // initializing element and component attributes\n        if (element.is('input')) {\n            input = element;\n        } else {\n            input = element.find(options.datepickerInput);\n            if (input.length === 0) {\n                input = element.find('input');\n            } else if (!input.is('input')) {\n                throw new Error('CSS class \"' + options.datepickerInput + '\" cannot be applied to non input element');\n            }\n        }\n\n        if (element.hasClass('input-group')) {\n            // in case there is more then one 'input-group-addon' Issue #48\n            if (element.find('.datepickerbutton').length === 0) {\n                component = element.find('.input-group-addon');\n            } else {\n                component = element.find('.datepickerbutton');\n            }\n        }\n\n        if (!options.inline && !input.is('input')) {\n            throw new Error('Could not initialize DateTimePicker without an input element');\n        }\n\n        // Set defaults for date here now instead of in var declaration\n        date = getMoment();\n        viewDate = date.clone();\n\n        $.extend(true, options, dataToOptions());\n\n        picker.options(options);\n\n        initFormatting();\n\n        attachDatePickerElementEvents();\n\n        if (input.prop('disabled')) {\n            picker.disable();\n        }\n        if (input.is('input') && input.val().trim().length !== 0) {\n            setValue(parseInputDate(input.val().trim()));\n        }\n        else if (options.defaultDate && input.attr('placeholder') === undefined) {\n            setValue(options.defaultDate);\n        }\n        if (options.inline) {\n            show();\n        }\n        return picker;\n    };\n\n    $.fn.datetimepicker = function (options) {\n        options = options || {};\n\n        var args = Array.prototype.slice.call(arguments, 1),\n            isInstance = true,\n            thisMethods = ['destroy', 'hide', 'show', 'toggle'],\n            returnValue;\n\n        if (typeof options === 'object') {\n            return this.each(function () {\n                var $this = $(this),\n                    _options;\n                if (!$this.data('DateTimePicker')) {\n                    // create a private copy of the defaults object\n                    _options = $.extend(true, {}, $.fn.datetimepicker.defaults, options);\n                    $this.data('DateTimePicker', DateTimePicker($this, _options));\n                }\n            });\n        } else if (typeof options === 'string') {\n            this.each(function () {\n                var $this = $(this),\n                    instance = $this.data('DateTimePicker');\n                if (!instance) {\n                    throw new Error('bootstrap-datetimepicker(\"' + options + '\") method was called on an element that is not using DateTimePicker');\n                }\n\n                returnValue = instance[options].apply(instance, args);\n                isInstance = returnValue === instance;\n            });\n\n            if (isInstance || $.inArray(options, thisMethods) > -1) {\n                return this;\n            }\n\n            return returnValue;\n        }\n\n        throw new TypeError('Invalid arguments for DateTimePicker: ' + options);\n    };\n\n    $.fn.datetimepicker.defaults = {\n        timeZone: '',\n        format: false,\n        dayViewHeaderFormat: 'MMMM YYYY',\n        extraFormats: false,\n        stepping: 1,\n        minDate: false,\n        maxDate: false,\n        useCurrent: true,\n        collapse: true,\n        locale: moment.locale(),\n        defaultDate: false,\n        disabledDates: false,\n        enabledDates: false,\n        icons: {\n            time: 'glyphicon glyphicon-time',\n            date: 'glyphicon glyphicon-calendar',\n            up: 'glyphicon glyphicon-chevron-up',\n            down: 'glyphicon glyphicon-chevron-down',\n            previous: 'glyphicon glyphicon-chevron-left',\n            next: 'glyphicon glyphicon-chevron-right',\n            today: 'glyphicon glyphicon-screenshot',\n            clear: 'glyphicon glyphicon-trash',\n            close: 'glyphicon glyphicon-remove'\n        },\n        tooltips: {\n            today: 'Go to today',\n            clear: 'Clear selection',\n            close: 'Close the picker',\n            selectMonth: 'Select Month',\n            prevMonth: 'Previous Month',\n            nextMonth: 'Next Month',\n            selectYear: 'Select Year',\n            prevYear: 'Previous Year',\n            nextYear: 'Next Year',\n            selectDecade: 'Select Decade',\n            prevDecade: 'Previous Decade',\n            nextDecade: 'Next Decade',\n            prevCentury: 'Previous Century',\n            nextCentury: 'Next Century',\n            pickHour: 'Pick Hour',\n            incrementHour: 'Increment Hour',\n            decrementHour: 'Decrement Hour',\n            pickMinute: 'Pick Minute',\n            incrementMinute: 'Increment Minute',\n            decrementMinute: 'Decrement Minute',\n            pickSecond: 'Pick Second',\n            incrementSecond: 'Increment Second',\n            decrementSecond: 'Decrement Second',\n            togglePeriod: 'Toggle Period',\n            selectTime: 'Select Time'\n        },\n        useStrict: false,\n        sideBySide: false,\n        daysOfWeekDisabled: false,\n        calendarWeeks: false,\n        viewMode: 'days',\n        toolbarPlacement: 'default',\n        showTodayButton: false,\n        showClear: false,\n        showClose: false,\n        widgetPositioning: {\n            horizontal: 'auto',\n            vertical: 'auto'\n        },\n        widgetParent: null,\n        ignoreReadonly: false,\n        keepOpen: false,\n        focusOnShow: true,\n        inline: false,\n        keepInvalid: false,\n        datepickerInput: '.datepickerinput',\n        keyBinds: {\n            up: function (widget) {\n                if (!widget) {\n                    return;\n                }\n                var d = this.date() || this.getMoment();\n                if (widget.find('.datepicker').is(':visible')) {\n                    this.date(d.clone().subtract(7, 'd'));\n                } else {\n                    this.date(d.clone().add(this.stepping(), 'm'));\n                }\n            },\n            down: function (widget) {\n                if (!widget) {\n                    this.show();\n                    return;\n                }\n                var d = this.date() || this.getMoment();\n                if (widget.find('.datepicker').is(':visible')) {\n                    this.date(d.clone().add(7, 'd'));\n                } else {\n                    this.date(d.clone().subtract(this.stepping(), 'm'));\n                }\n            },\n            'control up': function (widget) {\n                if (!widget) {\n                    return;\n                }\n                var d = this.date() || this.getMoment();\n                if (widget.find('.datepicker').is(':visible')) {\n                    this.date(d.clone().subtract(1, 'y'));\n                } else {\n                    this.date(d.clone().add(1, 'h'));\n                }\n            },\n            'control down': function (widget) {\n                if (!widget) {\n                    return;\n                }\n                var d = this.date() || this.getMoment();\n                if (widget.find('.datepicker').is(':visible')) {\n                    this.date(d.clone().add(1, 'y'));\n                } else {\n                    this.date(d.clone().subtract(1, 'h'));\n                }\n            },\n            left: function (widget) {\n                if (!widget) {\n                    return;\n                }\n                var d = this.date() || this.getMoment();\n                if (widget.find('.datepicker').is(':visible')) {\n                    this.date(d.clone().subtract(1, 'd'));\n                }\n            },\n            right: function (widget) {\n                if (!widget) {\n                    return;\n                }\n                var d = this.date() || this.getMoment();\n                if (widget.find('.datepicker').is(':visible')) {\n                    this.date(d.clone().add(1, 'd'));\n                }\n            },\n            pageUp: function (widget) {\n                if (!widget) {\n                    return;\n                }\n                var d = this.date() || this.getMoment();\n                if (widget.find('.datepicker').is(':visible')) {\n                    this.date(d.clone().subtract(1, 'M'));\n                }\n            },\n            pageDown: function (widget) {\n                if (!widget) {\n                    return;\n                }\n                var d = this.date() || this.getMoment();\n                if (widget.find('.datepicker').is(':visible')) {\n                    this.date(d.clone().add(1, 'M'));\n                }\n            },\n            enter: function () {\n                this.hide();\n            },\n            escape: function () {\n                this.hide();\n            },\n            //tab: function (widget) { //this break the flow of the form. disabling for now\n            //    var toggle = widget.find('.picker-switch a[data-action=\"togglePicker\"]');\n            //    if(toggle.length > 0) toggle.click();\n            //},\n            'control space': function (widget) {\n                if (!widget) {\n                    return;\n                }\n                if (widget.find('.timepicker').is(':visible')) {\n                    widget.find('.btn[data-action=\"togglePeriod\"]').click();\n                }\n            },\n            t: function () {\n                this.date(this.getMoment());\n            },\n            'delete': function () {\n                this.clear();\n            }\n        },\n        debug: false,\n        allowInputToggle: false,\n        disabledTimeIntervals: false,\n        disabledHours: false,\n        enabledHours: false,\n        viewDate: false\n    };\n\n    $.fn.datetimepicker.DateTimePicker = DateTimePicker;\n\n    return skylark.attach(\"intg.datetimepicker\", $.fn.datetimepicker);\n});\n"]}